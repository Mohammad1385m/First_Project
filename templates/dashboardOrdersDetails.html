{% extends "dashboardLayout.html" %}
{% load poll_extras %}

{% block title %}
    جزئیات سفارش #{{ order.factor_id }}
{% endblock %}

{% block container %}
    <main class="p-6 flex-1 overflow-y-auto">
        <div class="bg-white rounded-2xl min-h-80 h-auto shadow-custom p-4">
            <div class="px-2 md:px-3 pt-3 pb-5 mb-3 text-zinc-700 text-sm md:text-base flex items-center gap-x-2 border-b border-zinc-200">
                <svg class="fill-primary-500" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill=""
                     viewBox="0 0 256 256">
                    <path d="M128,16a88.1,88.1,0,0,0-88,88c0,75.3,80,132.17,83.41,134.55a8,8,0,0,0,9.18,0C136,236.17,216,179.3,216,104A88.1,88.1,0,0,0,128,16Zm0,56a32,32,0,1,1-32,32A32,32,0,0,1,128,72Z"></path>
                </svg>
                جزئیات سفارش {{ order.factor_id }}
            </div>
            <div class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-3 xl:gap-4">
                {% for item in order.orderdetails_set.all %}
                    <div class="shiny my-2 p-2 md:p-4 hover:border-transparent hover:shadow-lg transition-shadow rounded-3xl border border-zinc-200">
                        <a href="{% url 'product_details' item.product.slug %}" class="image-box mb-6 block py-10">
                            <img class="max-w-40 mx-auto" src="{{ item.product.main_image.url }}"
                                 alt="{{ item.product.title }}"/>
                        </a>
                        <a href="{% url 'product_details' item.product.slug %}"
                           class="text-sm font-semibold text-zinc-700 h-10 line-clamp-2">
                            {{ item.product.title }} ({{ item.count }})
                        </a>
                        <div class="flex my-5">
                            <div class="text-xl md:text-2xl text-zinc-800">{{ item.product.price }}</div>
                            <div class="-rotate-90 text-zinc-400 text-xs">
                                تومان
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
            <div class="px-2 sm:px-6 py-3 rounded-xl border border-zinc-300 mx-auto my-5 max-w-md">
                <div class="flex gap-x-1 justify-center items-center text-zinc-700">
                    <svg class="fill-zinc-500" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill=""
                         viewBox="0 0 256 256">
                        <path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm-4,48a12,12,0,1,1-12,12A12,12,0,0,1,124,72Zm12,112a16,16,0,0,1-16-16V128a8,8,0,0,1,0-16,16,16,0,0,1,16,16v40a8,8,0,0,1,0,16Z"></path>
                    </svg>
                    اطلاعات پرداخت
                </div>
                <div class="flex gap-x-1 justify-between items-center text-zinc-600 mt-5 bg-gray-100 rounded-lg px-2 py-3 text-sm">
                    <div>
                        قیمت کالاها ({{ order.orderdetails_set.all|item_counter }})
                    </div>
                    <div class="flex gap-x-1">
                        <div>
                            {{ order.orderdetails_set.all|final_total_price }}
                        </div>
                        <div>
                            تومان
                        </div>
                    </div>
                </div>
                <div class="flex gap-x-1 justify-between items-center text-zinc-600 mt-3 bg-gray-100 rounded-lg px-2 py-3 text-sm">
                    <div>
                        تخفیف
                    </div>
                    <div class="flex gap-x-1">
                        <div>
                            {{ order.orderdetails_set.all|total_discount }}
                        </div>
                        <div>
                            تومان
                        </div>
                    </div>
                </div>
                <div class="flex gap-x-1 justify-between items-center text-zinc-600 mt-3 bg-gray-100 rounded-lg px-2 py-3 text-sm">
                    <div>
                        تاریخ
                    </div>
                    <div class="flex gap-x-1">
                        <div>
                            {{ order.create_at|jalali_date_1 }}
                        </div>
                    </div>
                </div>
                <div class="flex gap-x-1 justify-between items-center text-zinc-600 mt-3 bg-gray-100 rounded-lg px-2 py-3 text-sm">
                    <div>
                        شماره پیگیری
                    </div>
                    <div class="flex gap-x-1">
                        <div>
                            {{ order.factor_id }}
                        </div>
                    </div>
                </div>
                <div class="flex gap-x-1 justify-between items-center text-zinc-800 mt-3 bg-gray-100 rounded-lg px-2 py-3 text-sm">
                    <div>
                        جمع سبد خرید
                    </div>
                    <div class="flex gap-x-1">
                        <div>
                            {{ order.total_cost }}
                        </div>
                        <div>
                            تومان
                        </div>
                    </div>
                </div>
                <div class="flex gap-x-1 justify-between items-center text-zinc-800 mt-3 bg-gray-100 rounded-lg px-2 py-3 text-sm">
                    <div>
                        آدرس
                    </div>
                    <div>
                        خراسان رضوی - سبزوار - خیابان مرکزی
                    </div>
                </div>
                <a href="#"
                   class="block text-center w-full px-2 py-3 mt-5 text-sm bg-gradient-to-bl from-primary-500 to-primary-700 hover:opacity-80 transition text-gray-100 rounded-lg">
                    چاپ
                </a>
            </div>
        </div>
    </main>
{% endblock %}
